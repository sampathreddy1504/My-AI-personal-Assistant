{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sampa\\\\Downloads\\\\myapp\\\\myapp\\\\myapp\\\\frontend\\\\src\\\\frontend\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const handleLogin = async () => {\n    if (!email || !password) {\n      setMessage(\"⚠️ Please enter email and password\");\n      return;\n    }\n    try {\n      const res = await axios.post(\"/auth/login\", {\n        email,\n        password\n      });\n      setMessage(res.data.message);\n      if (res.data.success && res.data.token && res.data.user) {\n        localStorage.setItem(\"authToken\", res.data.token);\n        localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n        // Ensure chatId is restored from any archived sessions so reload continues previous chat\n        try {\n          let chatId = localStorage.getItem(\"chatId\");\n          if (!chatId) {\n            const archiveRaw = localStorage.getItem(\"chatSessions\") || \"{}\";\n            const archive = JSON.parse(archiveRaw);\n            const ids = Object.keys(archive);\n            if (ids.length) {\n              const lastId = ids[ids.length - 1];\n              localStorage.setItem(\"chatId\", lastId);\n              localStorage.setItem(\"chatMessages\", JSON.stringify(archive[lastId] || []));\n            } else {\n              // if no archive, but chatMessages exists, keep them under a recovered id\n              const msgRaw = localStorage.getItem(\"chatMessages\");\n              const msgs = msgRaw ? JSON.parse(msgRaw) : null;\n              if (msgs && Array.isArray(msgs) && msgs.length) {\n                const recoveredId = `${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n                localStorage.setItem(\"chatId\", recoveredId);\n                localStorage.setItem(\"chatMessages\", JSON.stringify(msgs));\n              }\n            }\n          }\n        } catch {}\n        setTimeout(() => {\n          window.location.href = \"/chat\";\n        }, 500);\n      } else {\n        setMessage(\"Login failed\");\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setMessage(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Login failed\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex align-items-center justify-content-center vh-100\",\n    style: {\n      background: \"linear-gradient(135deg, #6f42c1, #0d6efd)\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card shadow-lg border-0 rounded-4 p-4 p-md-5\",\n      style: {\n        maxWidth: \"400px\",\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"fw-bold mb-2\",\n          children: \"Welcome Back!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted mb-0\",\n          children: \"Sign in to your account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label fw-semibold\",\n          children: \"Email Address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          className: \"form-control form-control-sm\",\n          placeholder: \"Enter your email\",\n          value: email,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label fw-semibold\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: \"form-control form-control-sm\",\n          placeholder: \"Enter your password\",\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary w-100 fw-bold py-2 mb-3\",\n        onClick: handleLogin,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"small mb-0\",\n          children: [\"Don\\u2019t have an account?\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/signup\",\n            className: \"text-primary fw-semibold text-decoration-none\",\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-info mt-3 text-center py-2 mb-0\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"s7C0CXXiuUHhlRlvkNKOC498sg0=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","Login","_s","email","setEmail","password","setPassword","message","setMessage","handleLogin","res","post","data","success","token","user","localStorage","setItem","JSON","stringify","chatId","getItem","archiveRaw","archive","parse","ids","Object","keys","length","lastId","msgRaw","msgs","Array","isArray","recoveredId","Date","now","Math","random","toString","slice","setTimeout","window","location","href","error","_error$response","_error$response$data","response","className","style","background","children","maxWidth","width","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["C:/Users/sampa/Downloads/myapp/myapp/myapp/frontend/src/frontend/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nfunction Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n\n  const handleLogin = async () => {\n    if (!email || !password) {\n      setMessage(\"⚠️ Please enter email and password\");\n      return;\n    }\n\n    try {\n      const res = await axios.post(\"/auth/login\", { email, password });\n      setMessage(res.data.message);\n\n      if (res.data.success && res.data.token && res.data.user) {\n        localStorage.setItem(\"authToken\", res.data.token);\n        localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n        // Ensure chatId is restored from any archived sessions so reload continues previous chat\n        try {\n          let chatId = localStorage.getItem(\"chatId\");\n          if (!chatId) {\n            const archiveRaw = localStorage.getItem(\"chatSessions\") || \"{}\";\n            const archive = JSON.parse(archiveRaw);\n            const ids = Object.keys(archive);\n            if (ids.length) {\n              const lastId = ids[ids.length - 1];\n              localStorage.setItem(\"chatId\", lastId);\n              localStorage.setItem(\"chatMessages\", JSON.stringify(archive[lastId] || []));\n            } else {\n              // if no archive, but chatMessages exists, keep them under a recovered id\n              const msgRaw = localStorage.getItem(\"chatMessages\");\n              const msgs = msgRaw ? JSON.parse(msgRaw) : null;\n              if (msgs && Array.isArray(msgs) && msgs.length) {\n                const recoveredId = `${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n                localStorage.setItem(\"chatId\", recoveredId);\n                localStorage.setItem(\"chatMessages\", JSON.stringify(msgs));\n              }\n            }\n          }\n        } catch {}\n\n        setTimeout(() => {\n          window.location.href = \"/chat\";\n        }, 500);\n      } else {\n        setMessage(\"Login failed\");\n      }\n    } catch (error) {\n      setMessage(error.response?.data?.message || \"Login failed\");\n    }\n  };\n\n  return (\n    <div\n      className=\"d-flex align-items-center justify-content-center vh-100\"\n      style={{ background: \"linear-gradient(135deg, #6f42c1, #0d6efd)\" }}\n    >\n      <div\n        className=\"card shadow-lg border-0 rounded-4 p-4 p-md-5\"\n        style={{ maxWidth: \"400px\", width: \"100%\" }}\n      >\n        {/* Header */}\n        <div className=\"text-center mb-4\">\n          <h2 className=\"fw-bold mb-2\">Welcome Back!</h2>\n          <p className=\"text-muted mb-0\">Sign in to your account</p>\n        </div>\n\n        {/* Form */}\n        <div className=\"mb-3\">\n          <label className=\"form-label fw-semibold\">Email Address</label>\n          <input\n            type=\"email\"\n            className=\"form-control form-control-sm\"\n            placeholder=\"Enter your email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </div>\n\n        <div className=\"mb-4\">\n          <label className=\"form-label fw-semibold\">Password</label>\n          <input\n            type=\"password\"\n            className=\"form-control form-control-sm\"\n            placeholder=\"Enter your password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n\n        <button\n          className=\"btn btn-primary w-100 fw-bold py-2 mb-3\"\n          onClick={handleLogin}\n        >\n          Login\n        </button>\n\n        <div className=\"text-center\">\n          <p className=\"small mb-0\">\n            Don’t have an account?{\" \"}\n            <a\n              href=\"/signup\"\n              className=\"text-primary fw-semibold text-decoration-none\"\n            >\n              Sign Up\n            </a>\n          </p>\n        </div>\n\n        {message && (\n          <div className=\"alert alert-info mt-3 text-center py-2 mb-0\">\n            {message}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}