{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sampa\\\\Downloads\\\\myapp\\\\myapp\\\\myapp\\\\frontend\\\\src\\\\frontend\\\\Tasks.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../styles/Tasks.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Tasks() {\n  _s();\n  const [activeTab, setActiveTab] = useState(\"all\");\n  const [tasks, setTasks] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  // Fetch tasks from backend or local storage\n  useEffect(() => {\n    const fetchTasks = async () => {\n      try {\n        const token = localStorage.getItem(\"authToken\");\n        const response = await fetch(`/api/tasks?token=${encodeURIComponent(token || \"\")}`);\n        const data = await response.json();\n        if (data.success && Array.isArray(data.tasks)) {\n          const formattedTasks = data.tasks.map(task => ({\n            id: task.id,\n            title: task.title,\n            status: task.notified ? \"completed\" : \"pending\",\n            datetime: task.datetime\n          }));\n          const sorted = formattedTasks.sort((a, b) => new Date(a.datetime) - new Date(b.datetime));\n          setTasks(sorted);\n          localStorage.setItem(\"tasks\", JSON.stringify(sorted));\n        } else {\n          // Fallback: Load from localStorage if API fails\n          const local = JSON.parse(localStorage.getItem(\"tasks\") || \"[]\");\n          setTasks(local);\n          console.warn(\"Loaded tasks from local storage.\");\n        }\n      } catch (err) {\n        console.error(\"Error fetching tasks:\", err);\n        const local = JSON.parse(localStorage.getItem(\"tasks\") || \"[]\");\n        setTasks(local);\n      }\n    };\n    fetchTasks();\n  }, []);\n\n  // Filter & Search\n  const filteredTasks = tasks.filter(t => activeTab === \"all\" ? true : t.status === activeTab).filter(t => t.title.toLowerCase().includes(searchTerm.toLowerCase()));\n\n  // Add Task\n  const handleAddTask = () => {\n    const title = prompt(\"Enter task title:\");\n    if (!title) return;\n    const datetime = prompt(\"Enter date and time (YYYY-MM-DD HH:MM):\", new Date().toISOString().slice(0, 16).replace(\"T\", \" \"));\n    if (!datetime) return;\n    const newTask = {\n      id: Date.now(),\n      title,\n      status: \"pending\",\n      datetime: new Date(datetime).toISOString()\n    };\n    const updated = [...tasks, newTask].sort((a, b) => new Date(a.datetime) - new Date(b.datetime));\n    setTasks(updated);\n    localStorage.setItem(\"tasks\", JSON.stringify(updated));\n    alert(\"✅ Task added successfully!\");\n  };\n\n  // Delete Task\n  const handleRemoveTask = async id => {\n    try {\n      const token = localStorage.getItem(\"authToken\");\n      if (token) {\n        await fetch(`/api/tasks/${id}?token=${encodeURIComponent(token)}`, {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n      }\n      const updated = tasks.filter(task => task.id !== id);\n      setTasks(updated);\n      localStorage.setItem(\"tasks\", JSON.stringify(updated));\n      alert(\"🗑️ Task removed successfully!\");\n    } catch (error) {\n      console.error(\"Failed to delete task:\", error);\n    }\n  };\n\n  // Toggle Status\n  const handleToggleStatus = id => {\n    const updated = tasks.map(task => {\n      if (task.id !== id) return task;\n      const newStatus = task.status === \"completed\" ? \"pending\" : \"completed\";\n      // Optimistic UI update\n      const updatedTask = {\n        ...task,\n        status: newStatus\n      };\n      // Persist change to backend if authenticated\n      const token = localStorage.getItem(\"authToken\");\n      if (token) {\n        fetch(`/api/tasks/${id}/status?token=${encodeURIComponent(token)}&status=${encodeURIComponent(newStatus)}`, {\n          method: \"PATCH\"\n        }).catch(err => console.error(\"Failed to update task status:\", err));\n      }\n      return updatedTask;\n    });\n    setTasks(updated);\n    localStorage.setItem(\"tasks\", JSON.stringify(updated));\n  };\n\n  // Clear all completed\n  const handleClearCompleted = async () => {\n    if (!window.confirm(\"Are you sure you want to clear all completed tasks?\")) return;\n    try {\n      const token = localStorage.getItem(\"authToken\");\n      // If a token exists, call backend to remove completed tasks server-side\n      if (token) {\n        await fetch(`/api/tasks/clear_completed?token=${encodeURIComponent(token)}`, {\n          method: \"DELETE\"\n        });\n        // refetch tasks from server to get authoritative list\n        const response = await fetch(`/api/tasks?token=${encodeURIComponent(token || \"\")}`);\n        const data = await response.json();\n        if (data.success && Array.isArray(data.tasks)) {\n          const formattedTasks = data.tasks.map(task => ({\n            id: task.id,\n            title: task.title,\n            status: task.notified ? \"completed\" : \"pending\",\n            datetime: task.datetime\n          }));\n          const sorted = formattedTasks.sort((a, b) => new Date(a.datetime) - new Date(b.datetime));\n          setTasks(sorted);\n          localStorage.setItem(\"tasks\", JSON.stringify(sorted));\n          return;\n        }\n      }\n\n      // Fallback: client-side only\n      const pending = tasks.filter(t => t.status !== \"completed\");\n      setTasks(pending);\n      localStorage.setItem(\"tasks\", JSON.stringify(pending));\n    } catch (err) {\n      console.error(\"Failed to clear completed tasks:\", err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tasks-page container mt-4 fade-in\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Tasks & Reminders\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: [tasks.filter(t => t.status === \"pending\").length, \" pending,\", \" \", tasks.filter(t => t.status === \"completed\").length, \" completed\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: handleAddTask,\n          children: \"+ Add Task\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-clear-completed\",\n          onClick: handleClearCompleted,\n          children: \"Clear Completed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"\\uD83D\\uDD0D Search tasks...\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"nav nav-tabs\",\n      children: [\"all\", \"pending\", \"completed\"].map(tab => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `nav-link ${activeTab === tab ? \"active\" : \"\"}`,\n          onClick: () => setActiveTab(tab),\n          children: tab.charAt(0).toUpperCase() + tab.slice(1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this)\n      }, tab, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4\",\n      children: filteredTasks.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tasks-scroll-container\",\n        \"data-testid\": \"tasks-scroll\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-group\",\n          children: filteredTasks.map(task => {\n            const isOverdue = new Date(task.datetime) < new Date() && task.status !== \"completed\";\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: `list-group-item d-flex justify-content-between align-items-center flex-column flex-md-row ${isOverdue ? \"overdue\" : \"\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  flex: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: task.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                  children: new Date(task.datetime).toLocaleString(undefined, {\n                    dateStyle: \"medium\",\n                    timeStyle: \"short\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-2 align-items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `badge ${task.status === \"completed\" ? \"bg-success\" : \"bg-warning text-dark\"} clickable`,\n                  onClick: () => handleToggleStatus(task.id),\n                  title: \"Click to toggle status\",\n                  children: task.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-sm btn-danger\",\n                  onClick: () => handleRemoveTask(task.id),\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 19\n              }, this)]\n            }, task.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"No tasks found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Create your first task to get started!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this);\n}\n_s(Tasks, \"Zm2TBWvgl6LHHty7a9/2jSGlrRo=\");\n_c = Tasks;\nvar _c;\n$RefreshReg$(_c, \"Tasks\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Tasks","_s","activeTab","setActiveTab","tasks","setTasks","searchTerm","setSearchTerm","fetchTasks","token","localStorage","getItem","response","fetch","encodeURIComponent","data","json","success","Array","isArray","formattedTasks","map","task","id","title","status","notified","datetime","sorted","sort","a","b","Date","setItem","JSON","stringify","local","parse","console","warn","err","error","filteredTasks","filter","t","toLowerCase","includes","handleAddTask","prompt","toISOString","slice","replace","newTask","now","updated","alert","handleRemoveTask","method","headers","handleToggleStatus","newStatus","updatedTask","catch","handleClearCompleted","window","confirm","pending","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","onClick","type","placeholder","value","onChange","e","target","tab","charAt","toUpperCase","isOverdue","style","flex","toLocaleString","undefined","dateStyle","timeStyle","_c","$RefreshReg$"],"sources":["C:/Users/sampa/Downloads/myapp/myapp/myapp/frontend/src/frontend/Tasks.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"../styles/Tasks.css\";\n\nexport default function Tasks() {\n  const [activeTab, setActiveTab] = useState(\"all\");\n  const [tasks, setTasks] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  // Fetch tasks from backend or local storage\n  useEffect(() => {\n    const fetchTasks = async () => {\n      try {\n        const token = localStorage.getItem(\"authToken\");\n        const response = await fetch(\n          `/api/tasks?token=${encodeURIComponent(token || \"\")}`\n        );\n        const data = await response.json();\n\n        if (data.success && Array.isArray(data.tasks)) {\n          const formattedTasks = data.tasks.map((task) => ({\n            id: task.id,\n            title: task.title,\n            status: task.notified ? \"completed\" : \"pending\",\n            datetime: task.datetime,\n          }));\n\n          const sorted = formattedTasks.sort(\n            (a, b) => new Date(a.datetime) - new Date(b.datetime)\n          );\n\n          setTasks(sorted);\n          localStorage.setItem(\"tasks\", JSON.stringify(sorted));\n        } else {\n          // Fallback: Load from localStorage if API fails\n          const local = JSON.parse(localStorage.getItem(\"tasks\") || \"[]\");\n          setTasks(local);\n          console.warn(\"Loaded tasks from local storage.\");\n        }\n      } catch (err) {\n        console.error(\"Error fetching tasks:\", err);\n        const local = JSON.parse(localStorage.getItem(\"tasks\") || \"[]\");\n        setTasks(local);\n      }\n    };\n\n    fetchTasks();\n  }, []);\n\n  // Filter & Search\n  const filteredTasks = tasks\n    .filter((t) => (activeTab === \"all\" ? true : t.status === activeTab))\n    .filter((t) => t.title.toLowerCase().includes(searchTerm.toLowerCase()));\n\n  // Add Task\n  const handleAddTask = () => {\n    const title = prompt(\"Enter task title:\");\n    if (!title) return;\n\n    const datetime = prompt(\n      \"Enter date and time (YYYY-MM-DD HH:MM):\",\n      new Date().toISOString().slice(0, 16).replace(\"T\", \" \")\n    );\n    if (!datetime) return;\n\n    const newTask = {\n      id: Date.now(),\n      title,\n      status: \"pending\",\n      datetime: new Date(datetime).toISOString(),\n    };\n\n    const updated = [...tasks, newTask].sort(\n      (a, b) => new Date(a.datetime) - new Date(b.datetime)\n    );\n\n    setTasks(updated);\n    localStorage.setItem(\"tasks\", JSON.stringify(updated));\n\n    alert(\"✅ Task added successfully!\");\n  };\n\n  // Delete Task\n  const handleRemoveTask = async (id) => {\n    try {\n      const token = localStorage.getItem(\"authToken\");\n      if (token) {\n        await fetch(`/api/tasks/${id}?token=${encodeURIComponent(token)}`, {\n          method: \"DELETE\",\n          headers: { \"Content-Type\": \"application/json\" },\n        });\n      }\n\n      const updated = tasks.filter((task) => task.id !== id);\n      setTasks(updated);\n      localStorage.setItem(\"tasks\", JSON.stringify(updated));\n\n      alert(\"🗑️ Task removed successfully!\");\n    } catch (error) {\n      console.error(\"Failed to delete task:\", error);\n    }\n  };\n\n  // Toggle Status\n  const handleToggleStatus = (id) => {\n    const updated = tasks.map((task) => {\n      if (task.id !== id) return task;\n      const newStatus = task.status === \"completed\" ? \"pending\" : \"completed\";\n      // Optimistic UI update\n      const updatedTask = { ...task, status: newStatus };\n      // Persist change to backend if authenticated\n      const token = localStorage.getItem(\"authToken\");\n      if (token) {\n        fetch(`/api/tasks/${id}/status?token=${encodeURIComponent(token)}&status=${encodeURIComponent(newStatus)}`, {\n          method: \"PATCH\",\n        }).catch((err) => console.error(\"Failed to update task status:\", err));\n      }\n      return updatedTask;\n    });\n\n    setTasks(updated);\n    localStorage.setItem(\"tasks\", JSON.stringify(updated));\n  };\n\n  // Clear all completed\n  const handleClearCompleted = async () => {\n    if (!window.confirm(\"Are you sure you want to clear all completed tasks?\")) return;\n\n    try {\n      const token = localStorage.getItem(\"authToken\");\n      // If a token exists, call backend to remove completed tasks server-side\n      if (token) {\n        await fetch(`/api/tasks/clear_completed?token=${encodeURIComponent(token)}`, {\n          method: \"DELETE\",\n        });\n        // refetch tasks from server to get authoritative list\n        const response = await fetch(`/api/tasks?token=${encodeURIComponent(token || \"\")}`);\n        const data = await response.json();\n        if (data.success && Array.isArray(data.tasks)) {\n          const formattedTasks = data.tasks.map((task) => ({\n            id: task.id,\n            title: task.title,\n            status: task.notified ? \"completed\" : \"pending\",\n            datetime: task.datetime,\n          }));\n          const sorted = formattedTasks.sort((a, b) => new Date(a.datetime) - new Date(b.datetime));\n          setTasks(sorted);\n          localStorage.setItem(\"tasks\", JSON.stringify(sorted));\n          return;\n        }\n      }\n\n      // Fallback: client-side only\n      const pending = tasks.filter((t) => t.status !== \"completed\");\n      setTasks(pending);\n      localStorage.setItem(\"tasks\", JSON.stringify(pending));\n    } catch (err) {\n      console.error(\"Failed to clear completed tasks:\", err);\n    }\n  };\n\n  return (\n    <div className=\"tasks-page container mt-4 fade-in\">\n      {/* Header */}\n      <div className=\"d-flex justify-content-between align-items-center mb-3\">\n        <div>\n          <h4>Tasks & Reminders</h4>\n          <small>\n            {tasks.filter((t) => t.status === \"pending\").length} pending,{\" \"}\n            {tasks.filter((t) => t.status === \"completed\").length} completed\n          </small>\n        </div>\n\n        <div className=\"d-flex gap-2\">\n          <button className=\"btn btn-primary\" onClick={handleAddTask}>\n            + Add Task\n          </button>\n          <button\n            className=\"btn btn-clear-completed\"\n            onClick={handleClearCompleted}\n          >\n            Clear Completed\n          </button>\n        </div>\n      </div>\n\n      {/* Search Bar */}\n      <div className=\"mb-3\">\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          placeholder=\"🔍 Search tasks...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n        />\n      </div>\n\n      {/* Tabs */}\n      <ul className=\"nav nav-tabs\">\n        {[\"all\", \"pending\", \"completed\"].map((tab) => (\n          <li key={tab} className=\"nav-item\">\n            <button\n              className={`nav-link ${activeTab === tab ? \"active\" : \"\"}`}\n              onClick={() => setActiveTab(tab)}\n            >\n              {tab.charAt(0).toUpperCase() + tab.slice(1)}\n            </button>\n          </li>\n        ))}\n      </ul>\n\n      {/* Task List */}\n      <div className=\"p-4\">\n        {filteredTasks.length > 0 ? (\n          <div className=\"tasks-scroll-container\" data-testid=\"tasks-scroll\">\n            <ul className=\"list-group\">\n              {filteredTasks.map((task) => {\n              const isOverdue =\n                new Date(task.datetime) < new Date() &&\n                task.status !== \"completed\";\n              return (\n                <li\n                  key={task.id}\n                  className={`list-group-item d-flex justify-content-between align-items-center flex-column flex-md-row ${\n                    isOverdue ? \"overdue\" : \"\"\n                  }`}\n                >\n                  <div style={{ flex: 1 }}>\n                    <strong>{task.title}</strong>\n                    <br />\n                    <small>\n                      {new Date(task.datetime).toLocaleString(undefined, {\n                        dateStyle: \"medium\",\n                        timeStyle: \"short\",\n                      })}\n                    </small>\n                  </div>\n\n                  <div className=\"d-flex gap-2 align-items-center\">\n                    <span\n                      className={`badge ${\n                        task.status === \"completed\"\n                          ? \"bg-success\"\n                          : \"bg-warning text-dark\"\n                      } clickable`}\n                      onClick={() => handleToggleStatus(task.id)}\n                      title=\"Click to toggle status\"\n                    >\n                      {task.status}\n                    </span>\n                    <button\n                      className=\"btn btn-sm btn-danger\"\n                      onClick={() => handleRemoveTask(task.id)}\n                    >\n                      Remove\n                    </button>\n                  </div>\n                </li>\n              );\n              })}\n            </ul>\n          </div>\n        ) : (\n          <div className=\"text-center mt-4\">\n            <p>\n              <strong>No tasks found</strong>\n            </p>\n            <p>Create your first task to get started!</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}